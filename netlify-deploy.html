<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® Stardew Valley Live - Netlify Deploy</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        .deployment-notice {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: center;
            z-index: 10002;
            font-family: Arial, sans-serif;
        }
        
        .setup-panel {
            position: fixed;
            top: 60px;
            right: 10px;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 20px;
            border-radius: 15px;
            max-width: 400px;
            z-index: 10001;
            font-family: Arial, sans-serif;
        }
        
        .setup-step {
            margin: 15px 0;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
        
        .setup-step h4 {
            margin: 0 0 10px 0;
            color: #4CAF50;
        }
        
        .code-snippet {
            background: #333;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            margin: 5px 0;
            word-break: break-all;
        }
        
        .demo-button {
            background: linear-gradient(135deg, #FF6B6B, #FF8E53);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px 5px;
            font-weight: bold;
        }
        
        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .close-setup {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- Avviso deployment -->
    <div class="deployment-notice" id="deployment-notice">
        ğŸš€ <strong>Netlify Deployment Ready!</strong> - Setup OAuth per streaming live completo
        <button onclick="document.getElementById('deployment-notice').style.display='none'" style="background:none;border:none;color:white;margin-left:20px;cursor:pointer;">âœ•</button>
    </div>
    
    <!-- Pannello Setup -->
    <div class="setup-panel" id="setup-panel">
        <button class="close-setup" onclick="document.getElementById('setup-panel').style.display='none'">âœ•</button>
        
        <h3>ğŸ”§ Setup per Streaming Live</h3>
        
        <div class="setup-step">
            <h4>1. ğŸ“± Crea App Twitch</h4>
            <p>Vai su: <a href="https://dev.twitch.tv/console" target="_blank" style="color: #9146ff;">dev.twitch.tv/console</a></p>
            <div class="code-snippet">Redirect URI: https://TUODOMINIO.netlify.app/auth/twitch/callback</div>
        </div>
        
        <div class="setup-step">
            <h4>2. ğŸµ Crea App TikTok</h4>
            <p>Vai su: <a href="https://developers.tiktok.com/" target="_blank" style="color: #000;">developers.tiktok.com</a></p>
            <div class="code-snippet">Redirect URI: https://TUODOMINIO.netlify.app/auth/tiktok/callback</div>
        </div>
        
        <div class="setup-step">
            <h4>3. âš™ï¸ Configura Netlify</h4>
            <p>Environment Variables:</p>
            <div class="code-snippet">
                TWITCH_CLIENT_ID=tuo_client_id<br>
                TWITCH_CLIENT_SECRET=tuo_secret<br>
                TIKTOK_CLIENT_KEY=tuo_client_key<br>
                TIKTOK_CLIENT_SECRET=tuo_secret
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 20px;">
            <button class="demo-button" onclick="startDemo()">ğŸ® ModalitÃ  Demo</button>
            <button class="demo-button" onclick="openGuide()">ğŸ“– Guida Completa</button>
        </div>
    </div>
    
    <!-- Overlay principale (stesso di prima) -->
    <div class="overlay-container">
        <!-- Cornice principale -->
        <div class="main-frame">
            <!-- Angoli decorativi -->
            <div class="corner top-left">ğŸŒ±</div>
            <div class="corner top-right">ğŸ„</div>
            <div class="corner bottom-left">ğŸ¥•</div>
            <div class="corner bottom-right">ğŸŒ»</div>
            
            <!-- Bordi decorativi -->
            <div class="border-decoration top">
                <span class="plant-icon">ğŸŒ¿</span>
                <span class="plant-icon">ğŸ…</span>
                <span class="plant-icon">ğŸŒ½</span>
                <span class="plant-icon">ğŸ¥¬</span>
                <span class="plant-icon">ğŸŒ¶ï¸</span>
            </div>
            
            <div class="border-decoration bottom">
                <span class="plant-icon">ğŸ¥”</span>
                <span class="plant-icon">ğŸ†</span>
                <span class="plant-icon">ğŸ¥’</span>
                <span class="plant-icon">ğŸŒ°</span>
                <span class="plant-icon">ğŸ“</span>
            </div>
            
            <div class="border-decoration left">
                <span class="plant-icon vertical">ğŸŒ¸</span>
                <span class="plant-icon vertical">ğŸŒº</span>
                <span class="plant-icon vertical">ğŸŒ¼</span>
            </div>
            
            <div class="border-decoration right">
                <span class="plant-icon vertical">ğŸµï¸</span>
                <span class="plant-icon vertical">ğŸŒ·</span>
                <span class="plant-icon vertical">ğŸŒ¹</span>
            </div>
        </div>
        
        <!-- Pannello informazioni -->
        <div class="info-panel">
            <div class="info-title">ğŸ“± Info Giardino ğŸ“±</div>
            <div class="info-content">
                <div class="stat-item">
                    <span class="stat-icon">â­</span>
                    <span class="stat-text">Livello Farming</span>
                    <span class="stat-value" id="farming-level">10</span>
                </div>
                <div class="stat-item">
                    <span class="stat-icon">ğŸ’°</span>
                    <span class="stat-text">Monete</span>
                    <span class="stat-value" id="coins">999,999g</span>
                </div>
                <div class="stat-item seeds-item" id="seeds-item">
                    <span class="stat-icon">ğŸŒ±</span>
                    <span class="stat-text">Semi Piantati</span>
                    <span class="stat-value" id="seeds">42</span>
                    <span class="expand-arrow">â–¼</span>
                </div>
            </div>
        </div>
        
        <!-- Sezione ricette -->
        <div class="recipe-panel">
            <div class="recipe-title" id="recipe-title">ğŸ‘©â€ğŸ³ Ricetta del Giorno ğŸ‘©â€ğŸ³</div>
            <div class="recipe-content">
                <div class="recipe-item">
                    <span class="recipe-icon" id="recipe-icon">ğŸ¥—</span>
                    <span class="recipe-name" id="recipe-name">Insalata di Stagione</span>
                </div>
                <div class="recipe-ingredients" id="recipe-ingredients">
                    <span class="ingredient" id="ingredient1">ğŸ¥¬ Lattuga</span>
                    <span class="ingredient" id="ingredient2">ğŸ… Pomodoro</span>
                    <span class="ingredient" id="ingredient3">ğŸ¥’ Cetriolo</span>
                </div>
            </div>
        </div>
        
        <!-- Notifiche animate -->
        <div class="notification-area">
            <div class="notification hidden" id="follow-notification">
                <span class="notif-icon">ğŸ‰</span>
                <span class="notif-text" id="notification-text">Nuovo Follower!</span>
                <span class="notif-icon">ğŸŒŸ</span>
            </div>
        </div>
        
        <!-- Decorazioni fluttuanti -->
        <div class="floating-decorations">
            <div class="floating-item" style="--delay: 0s; --x: 10%;">ğŸ¦‹</div>
            <div class="floating-item" style="--delay: 2s; --x: 70%;">ğŸ</div>
            <div class="floating-item" style="--delay: 4s; --x: 40%;">ğŸƒ</div>
            <div class="floating-item" style="--delay: 6s; --x: 80%;">âœ¨</div>
            <div class="floating-item" style="--delay: 8s; --x: 20%;">ğŸŒ¸</div>
        </div>
        
        <!-- Barra del tempo -->
        <div class="weather-bar">
            <div class="weather-item">
                <span class="weather-icon" id="weather-icon">â˜€ï¸</span>
                <span class="weather-text" id="weather-text">Primavera - Giorno 15</span>
            </div>
            <div class="weather-temp" id="weather-temp">22Â°C</div>
        </div>
        
        <!-- Demo streaming panel -->
        <div id="demo-streaming-panel" style="display: none; position: fixed; bottom: 20px; right: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 15px; font-family: Arial;">
            <h4>ğŸ® Demo Mode Attivo</h4>
            <p>ğŸ“Š Spettatori: <span id="demo-viewers">42</span></p>
            <p>â±ï¸ Live da: <span id="demo-duration">15:30</span></p>
            <button class="demo-button" onclick="demoNotification()">ğŸ‰ Test Notifica</button>
            <button class="demo-button" onclick="document.getElementById('demo-streaming-panel').style.display='none'">âœ• Chiudi</button>
        </div>
    </div>
    
    <script src="main.js"></script>
    <script src="configurator.js"></script>
    <script>
        console.log('ğŸ® Netlify Live Platform inizializzata');
        
        let demoMode = false;
        let demoInterval = null;
        
        // ModalitÃ  demo
        function startDemo() {
            demoMode = true;
            document.getElementById('setup-panel').style.display = 'none';
            document.getElementById('demo-streaming-panel').style.display = 'block';
            
            // Simula contatore spettatori
            let viewers = 42;
            let duration = 15 * 60 + 30; // 15:30 in secondi
            
            demoInterval = setInterval(() => {
                viewers += Math.floor(Math.random() * 5) - 2; // +/- 2 spettatori
                if (viewers < 1) viewers = 1;
                
                duration += 1;
                const minutes = Math.floor(duration / 60);
                const seconds = duration % 60;
                
                document.getElementById('demo-viewers').textContent = viewers;
                document.getElementById('demo-duration').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            }, 3000);
            
            // Notifiche casuali
            setTimeout(() => {
                if (demoMode) showNotification('ğŸ‰ Nuovo follower: GamerColtivatore!');
            }, 10000);
            
            setTimeout(() => {
                if (demoMode) showNotification('ğŸ’ Donazione da: StardewFan - Grazie!');
            }, 25000);
        }
        
        // Test notifica
        function demoNotification() {
            const messages = [
                'ğŸ‰ Nuovo follower: StreamViewer123!',
                'ğŸ’° Donazione da: GenerousFarmer!',
                'â­ Raid da: AnotherStreamer con 15 spettatori!',
                'ğŸ† Obiettivo 100 follower raggiunto!'
            ];
            
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            showNotification(randomMessage);
        }
        
        // Mostra notifica
        function showNotification(message) {
            const notification = document.getElementById('follow-notification');
            const textElement = document.getElementById('notification-text');
            
            textElement.textContent = message;
            notification.classList.remove('hidden');
            
            setTimeout(() => {
                notification.classList.add('hidden');
            }, 4000);
        }
        
        // Apri guida
        function openGuide() {
            window.open('https://github.com/vincilisi/overlay/blob/main/STREAMING-GUIDE.md', '_blank');
        }
        
        // Sistema aggiornamento overlay
        function loadOverlayData() {
            const data = JSON.parse(localStorage.getItem('stardew-overlay-data') || '{}');
            
            if (data.seeds !== undefined) document.getElementById('seeds').textContent = data.seeds;
            if (data.coins) document.getElementById('coins').textContent = data.coins;
            if (data.farmingLevel) document.getElementById('farming-level').textContent = data.farmingLevel;
            if (data.weatherIcon) document.getElementById('weather-icon').textContent = data.weatherIcon;
            if (data.weatherText) document.getElementById('weather-text').textContent = data.weatherText;
            if (data.weatherTemp) document.getElementById('weather-temp').textContent = data.weatherTemp;
            if (data.recipeIcon) document.getElementById('recipe-icon').textContent = data.recipeIcon;
            if (data.recipeName) document.getElementById('recipe-name').textContent = data.recipeName;
            if (data.ingredient1) document.getElementById('ingredient1').textContent = data.ingredient1;
            if (data.ingredient2) document.getElementById('ingredient2').textContent = data.ingredient2;
            if (data.ingredient3) document.getElementById('ingredient3').textContent = data.ingredient3;
        }
        
        // Controlla notifiche
        function checkNotifications() {
            const notificationData = localStorage.getItem('stardew-overlay-notification');
            if (notificationData) {
                const notification = JSON.parse(notificationData);
                showNotification(notification.message);
                localStorage.removeItem('stardew-overlay-notification');
            }
        }
        
        // Aggiornamento automatico
        setInterval(() => {
            loadOverlayData();
            checkNotifications();
        }, 2000);
        
        // Inizializzazione
        loadOverlayData();
        
        console.log('ğŸš€ Netlify Deploy ready! ModalitÃ  demo disponibile.');
    </script>
</body>
</html>